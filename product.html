<!-- product.html এর JavaScript অংশ আপডেট করুন -->
<script>
// Updated Product Detail with Real Data
let currentProduct = null;

async function initProductDetailPage() {
    await loadProductData();
    setupEventListeners();
    updateCartCount();
}

async function loadProductData() {
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');

    if (!productId) {
        window.location.href = 'shop.html';
        return;
    }

    try {
        // Load product with real statistics
        currentProduct = await dataManager.getProduct(productId);
        
        if (!currentProduct) {
            window.location.href = 'shop.html';
            return;
        }

        displayProductDetails();
        await loadProductReviews();
        await loadRelatedProducts();
        
    } catch (error) {
        console.error('Error loading product:', error);
        window.location.href = 'shop.html';
    }
}

async function loadProductReviews() {
    if (!currentProduct) return;

    try {
        const reviews = await dataManager.getProductReviews(currentProduct.id, 10);
        displayProductReviews(reviews);
    } catch (error) {
        console.error('Error loading reviews:', error);
    }
}

async function loadRelatedProducts() {
    if (!currentProduct) return;

    try {
        const relatedProducts = await dataManager.getRelatedProducts(
            currentProduct.id, 
            currentProduct.category, 
            4
        );
        displayRelatedProducts(relatedProducts);
    } catch (error) {
        console.error('Error loading related products:', error);
    }
}

function displayProductDetails() {
    if (!currentProduct) return;

    // Update product info with REAL data
    document.getElementById('productTitle').textContent = currentProduct.name;
    document.getElementById('productBrand').textContent = `ব্র্যান্ড: ${currentProduct.brand}`;
    document.getElementById('productRating').textContent = currentProduct.rating.toFixed(1);
    document.getElementById('reviewCount').textContent = `(${currentProduct.reviews}+ রিভিউ)`;
    document.getElementById('soldCount').textContent = `${currentProduct.sold}+ বিক্রিত`;

    // Update prices
    document.getElementById('currentPrice').textContent = `৳${currentProduct.price.toLocaleString()}`;
    document.getElementById('originalPrice').textContent = `৳${currentProduct.originalPrice.toLocaleString()}`;
    document.getElementById('discountBadge').textContent = `-${currentProduct.discount}%`;

    // Update stock info
    document.getElementById('stockInfo').innerHTML = `
        <i class="fas fa-check-circle"></i>
        <span>স্টকে আছে (${currentProduct.stock})</span>
    `;

    // Load product specifications if available
    if (currentProduct.specifications) {
        displaySpecifications(currentProduct.specifications);
    }
}
</script>
